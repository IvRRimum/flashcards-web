<div class="row">
  <div class="col-12 col-lg-4">
    <%= render @flashcard_category %>
    <%= link_to flashcard_category_play_path(@flashcard_category.id), class: "btn btn-success col-12 mb-2 text-white py-3 border-b-4 border-green-700" do %>
      <i class="bi bi-play-fill text-xl"></i> <span class="text-xl font-extrabold">PLAY</span>
    <% end %>
    <%= link_to edit_flashcard_category_path(@flashcard_category.id), class: "btn btn-success col-12 mb-2 text-white" do %>
      <i class="bi bi-pencil-square"></i> <small>Edit Flashcard Category</small>
    <% end %>
    <%= link_to @flashcard_category, method: :delete, class: "btn btn-danger col-12 mb-2 text-white", data: {confirm: "Are you sure?"} do %>
      <i class="bi bi-trash"></i> <small>Delete Flashcard Category</small>
    <% end %>
    <%= link_to new_flashcard_path(flashcard_category_id: @flashcard_category.id), class: "btn btn-warning col-12 text-white mb-3" do %>
      <i class="bi bi-plus"></i> <small>Create Flashcard</small>
    <% end %>
  </div>
  <div class="col-12 col-lg-8">
    <nav>
      <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <button class="nav-link active" 
                id="nav-home-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#flashcards" 
                type="button" role="tab" 
                              aria-controls="flashcards" 
                              aria-selected="true">
          Flashcards
        </button>
        <button class="nav-link" 
                id="flashcard-answers-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#flashcard-answers" 
                type="button" 
                role="tab" 
                aria-controls="flashcard-answers" 
                aria-selected="false">
          Flashcard Answers
        </button>
      </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
      <div class="tab-pane fade show active" id="flashcards" role="tabpanel" aria-labelledby="flashcards">
        <div class="row mt-3">
          <% @flashcards.each do |flashcard| %>
            <div class="col-12 col-lg-3">
              <%= link_to flashcard_path(flashcard.id), class: "text-decoration-none" do %>
                <% render flashcard %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
      <div class="tab-pane fade" id="flashcard-answers" role="tabpanel" aria-labelledby="flashcard-answers-tab">
        <table class="table mt-3">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Flashcard</th>
              <th scope="col">Type</th>
              <th scope="col">Thinking time</th>
              <th scope="col">Answer time</th>
              <th scope="col">Correct</th>
              <th scope="col">Created</th>
            </tr>
          </thead>
          <tbody>
            <% @flashcard_answers.each_with_index do |fa, i| %>
              <tr>
                <th scope="row"><%= i+1 %></th>
                <td><%= link_to truncate("#{fa.flashcard.hanzi} #{fa.flashcard.pinyin}", length: 20), flashcard_path(fa.flashcard.id) %></td>
                <td><%= fa.fc_type %></td>
                <td><%= fa.thinking_time %>ms</td>
                <td><%= fa.answer_response_time %>ms</td>
                <td>
                  <% if fa.correct %>
                    <span class="badge bg-success"><i class="bi bi-hand-thumbs-up"></i></span>
                  <% else %>
                    <span class="badge bg-danger"><i class="bi bi-hand-thumbs-down"></i></span>
                  <% end %>
                </td>
                <td><%= l fa.created_at, format: :long %></td>
              </tr>
            <% end %>
          </tbody>
        </table>

        <%= paginate @flashcard_answers, theme: 'bootstrap-5', params: { anchor: 'flashcard-answers' } %>
      </div>
    </div>
  </div>
</div>
